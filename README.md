# AI-Powered Classroom Allocation System (ClassForge Concept)

## Overview

This project implements a system for optimizing classroom allocations for up to **10,000 students**, drawing inspiration from the "ClassForge" design concept. It leverages machine learning and clustering techniques to group students based on predicted academic outcomes, well-being indicators, and peer collaboration potential. The goal is to create balanced and effective classroom environments while providing administrators with insights through an interactive visualization dashboard.

Instead of relying solely on complex optimization algorithms, this approach uses:
1.  **Predictive Analytics:** Standard machine learning models (Random Forest, XGBoost) predict individual student risks and scores.
2.  **Clustering Algorithms:** K-Means and Spectral Clustering group students based on similarities in features and predicted outcomes.
3.  **Interactive Visualization:** A Gradio dashboard allows exploration of the generated class assignments, student details within classes, and intra-class social network structures.

## Features

* **Synthetic Data Generation:** Creates a dataset for 10,000 students simulating survey responses, academic performance, and social connections.
* **Predictive Modeling:** Trains models to predict:
    * Academic Risk (Likelihood of not succeeding)
    * Wellbeing Risk (Likelihood of wellbeing decline)
    * Peer Collaboration Score (Likelihood of positive peer interaction)
* **Clustering-Based Allocation:**
    * Applies K-Means for initial grouping.
    * Applies Spectral Clustering for potential refinement (Note: can be computationally intensive at scale).
* **Interactive Dashboard:**
    * View overall class statistics (size, average metrics).
    * Select specific classes generated by either K-Means or Spectral Clustering.
    * Inspect the list of students within a selected class and their predicted scores.
    * Visualize the friendship network *within* the selected class, colored by different metrics.
    * View histograms of key metric distributions for the selected class.

## Technology Stack

* **Programming Language:** Python 3.x
* **Data Handling:** pandas, numpy
* **Machine Learning:** scikit-learn, XGBoost
* **Network Analysis:** networkx
* **Visualization:** matplotlib, Gradio

## Modules

1.  **Data Generation (`generate_synthetic_data` function):**
    * Creates `synthetic_student_data.csv` if it doesn't exist.
    * Simulates data for `NUM_STUDENTS` (configurable, target 10,000).
    * Includes academic scores, calculated survey metrics (e.g., `k6_overall`, `GrowthMindset`), and friendship links (`Friends` column).

2.  **Predictive Analytics & Clustering (`run_analysis` function):**
    * Loads the synthetic data.
    * Calculates proxy labels for training (e.g., `Academic_Success`, `Wellbeing_Decline`).
    * Trains Random Forest and XGBoost models.
    * Predicts `Academic_Risk`, `Wellbeing_Risk`, and `Peer_Score` for all students.
    * Prepares features for clustering (including raw features, predicted scores, and basic network features like `Degree_Centrality`).
    * Scales features using `StandardScaler`.
    * Performs K-Means clustering (`Class_KMeans`).
    * Performs Spectral clustering (`Class_Spectral`).

3.  **Visualization Dashboard (`app.py` using Gradio):**
    * Loads the processed data with cluster assignments.
    * Provides dropdowns to select the clustering method and class ID.
    * Displays overview statistics, student lists, network graphs (using `plot_network`), and histograms (using `plot_histogram`).
    * Allows coloring the network graph based on selected metrics.

## Setup and Usage

1.  **Prerequisites:**
    * Python 3.8 or higher.
    * `pip` (Python package installer).

2.  **Installation:**
    * Clone the repository or download the source code.
    * Install the required libraries:
        ```bash
        pip install gradio pandas numpy scikit-learn xgboost networkx matplotlib
        ```

3.  **Configuration (for 10,000 Students):**
    * Open the main Python script (e.g., `app.py`).
    * Modify the configuration constants at the top:
        ```python
        NUM_STUDENTS = 10000 # Set to desired number of students
        CLASS_SIZE_TARGET = 30 # Or desired average class size
        N_CLUSTERS = max(1, NUM_STUDENTS // CLASS_SIZE_TARGET)
        ```
    * **Important:** Be aware that increasing `NUM_STUDENTS` to 10,000 will significantly increase:
        * Data generation time (if the CSV doesn't exist).
        * Memory usage during analysis and clustering.
        * Computation time, especially for Spectral Clustering and potentially network graph layout.

4.  **Running the Application:**
    * Navigate to the project directory in your terminal.
    * Run the Gradio app script:
        ```bash
        python app.py
        ```
    * The script will first generate/load data, then run the analysis (this might take several minutes for 10,000 students).
    * Once processing is complete, Gradio will provide a local URL (e.g., `http://127.0.0.1:7860`). Open this URL in your web browser.

5.  **Using the Dashboard:**
    * Select either 'K-Means' or 'Spectral' clustering.
    * Choose a 'Class ID' from the dropdown.
    * Select a metric (e.g., 'Academic_Risk') to color the network nodes.
    * Explore the overview table, student list, network graph, and histograms.

## Scaling Considerations (10,000 Students)

* **Memory:** Processing 10,000 students, especially with feature scaling and clustering, will require substantial RAM. Ensure your system meets the requirements.
* **Computation Time:**
    * **Spectral Clustering:** Can become very slow (O(n^3) or O(n^2) depending on implementation details) for 10,000 data points. The current implementation uses `affinity='rbf'`, which is generally better than `nearest_neighbors` at scale, but may still be time-consuming. Consider alternatives like K-Means or MiniBatchKMeans if performance is critical.
    * **Network Visualization:** Generating `networkx` layouts (like `spring_layout`) for dense graphs within larger classes can also be slow. The dashboard visualizes only intra-class networks, which helps, but performance might degrade for large classes.
* **Data Generation:** The initial data generation step will take longer.
* **Gradio Responsiveness:** While Gradio itself is generally responsive, the backend processing triggered by user interaction (especially if re-running parts of the analysis were implemented) would be slower. The current implementation pre-computes everything, so interactions should remain relatively fast once loaded.

## Future Work

* Implement manual adjustment features (drag-and-drop students between classes).
* Integrate explicit fairness constraints during or after clustering.
* Add more sophisticated network analysis metrics.
* Explore alternative visualization libraries (e.g., Plotly Dash for potentially more interactive graphs).
* Integrate with a database for more robust data handling.
* Optimize clustering and visualization for even larger datasets.
